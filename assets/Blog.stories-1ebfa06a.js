import{j as e}from"./jsx-runtime-ccada58e.js";import{F as M}from"./Footer-25b01f6b.js";import{P as Q}from"./Page-397641ad.js";import{N as _,B as C}from"./Navbar-fbfb2a7d.js";import{S as D}from"./ScrollToTop-491c0d1c.js";import{a as k,B as q}from"./index-72f284f9.js";import{B as j}from"./Button-33280d34.js";import{S as G,M as $}from"./MultiSelection-4bdea2de.js";import{S as z}from"./SearchField-c8533b4c.js";import{B as I,L as J}from"./BlogCardLoading-2bef8e25.js";import{s as c,u as U,a as V,b as H,d as W,Q as K,c as X}from"./sortFuncs-08258ded.js";import{u as Y,a as Z,d as ee,e as te,R as b}from"./index.esm-ce798ad2.js";import{c as o}from"./cssUtils-1e7dba99.js";import{F as se}from"./index-963fef9e.js";import{U as oe,V as re}from"./index.esm-77211171.js";import{r as l}from"./index-f1f749bf.js";import"./useMediaQuery-f3cc2322.js";import"./index.esm-966ec57a.js";import"./iconBase-4e3618d4.js";import"./iframe-a0049799.js";import"../sb-preview/runtime.mjs";import"./logo-7615857d.js";import"./mouseHover-f6e29944.js";import"./lib-32fe9ed5.js";import"./_commonjsHelpers-042e6b4d.js";import"./extends-34e645d9.js";import"./emotion-use-insertion-effect-with-fallbacks.browser.esm-3d5299f2.js";import"./hoist-non-react-statics.cjs-691fe6cb.js";import"./index-96c5f47c.js";import"./index.esm-fa6ef5c1.js";import"./index-7f2f9e92.js";const ae=(a,i)=>{const r=a.toLowerCase();return r.length===0||i.title.toLowerCase().includes(r)||i.description.toLowerCase().includes(r)||i.tag_list.some(m=>m.toLowerCase().includes(r))},N=30,ie=()=>{const[a,i]=l.useState([]),[r,m]=l.useState(c[0]),[F,P]=l.useState([]),[d,g]=l.useState(""),{status:u,data:p}=U(["devdotto","articlesMeta",N,1],W(N));l.useEffect(()=>{P(p?[...new Set(p.flatMap(t=>t.tag_list))].map(t=>{const s=p.filter(n=>n.tag_list.includes(t)).length;return{value:t,count:s,label:`${t} (${s})`}}).filter(t=>t.count>0).sort((t,s)=>s.count-t.count):[])},[p]);const R=t=>{t.preventDefault(),g(t.target.value)},[A,v]=l.useState(!1),S=()=>{i([]),m(c[0]),g(""),v(!0),setTimeout(()=>{v(!1)},500)},w=k(),[h,E]=Y("blogOptions",{tags:[],sort:c[0],searchText:""}),x=Z();l.useEffect(()=>{if(x.toString()){if(x.get("reset"))return S(),w({hash:window.location.hash,search:""},{replace:!0}),()=>{};i([]),ee(x.get("technologies")||"").forEach(t=>{const s=a.find(n=>n.value.toLowerCase()===t.toLowerCase());s&&i(n=>[...n,s])}),m(c.find(t=>{var s;return t.value.toLowerCase()===((s=x.get("sort"))==null?void 0:s.toLowerCase())})||c[0]),g(x.get("searchText")||"")}else i(h.tags),m(h.sort),g(h.searchText);return()=>{}},[]),l.useEffect(()=>{var t;E({tags:a,sort:r,searchText:d}),w({hash:window.location.hash,search:"?"+new URLSearchParams(JSON.parse(JSON.stringify({tags:te(a.map(s=>s.value))||void 0,sort:r.value===((t=c[0])==null?void 0:t.value)?void 0:r.value,searchText:d||void 0}))).toString()},{replace:!0})},[d,r,a]);const y=l.useMemo(()=>u==="loading"||u==="error"?[]:p.sort(V).sort(H(r.value)).filter(t=>{const s=a.map(n=>n.value);return ae(d,t)&&(a.length===0||t.tag_list.filter(n=>s.includes(n)).length!==0)}).map((t,s)=>e.jsx(I,{article:t},s)),[p,d,r.value,a,u]);return e.jsx("div",{children:e.jsxs(se,{transitionDuration:200,children:[e.jsxs("div",{className:o("flex gap-4 justify-center items-center max-w-2xl mx-auto mb-8","flex-row","flex-wrap"),children:[e.jsx(j,{icon:e.jsx(oe,{}),isLight:!0,label:"DEV.to",to:"https://dev.to/timwjames",tooltip:"Find my personal blog @timwjames"}),e.jsx(j,{icon:e.jsx(re,{}),isLight:!0,label:"Medium",to:"https://medium.com/@twjames",tooltip:"Find my professional @twjames"})]}),e.jsxs("section",{"aria-label":"Search Controls",className:o("flex mx-auto items-center place-content-center mb-4","flex-col"),children:[e.jsxs("div",{className:o("w-full flex gap-4"),children:[e.jsx(z,{handleChange:R,searchText:d}),e.jsx(j,{className:o("!text-3xl !px-2 !py-2 !-mt-1"),icon:A?e.jsx("span",{className:o("inline-block","leading-0","motion-safe:animate-spin"),children:e.jsx(b,{})}):e.jsx(b,{}),iconRight:!0,isLabelHidden:!0,isLight:!0,label:"Reset",mode:"button",onClick:S,tooltip:"Reset search and filter options"})]}),e.jsxs("div",{className:o("flex gap-4 w-full","flex-wrap"),children:[e.jsx("div",{className:o("z-30 grow min-w-fit"),children:e.jsx(G,{options:c,selectedOption:r,setSelectedOption:m})}),e.jsx("div",{className:o("z-20 grow"),children:e.jsx($,{options:F,placeholder:"Filter by tags...",selectedOptions:a,setSelectedOptions:i})})]})]}),e.jsx("section",{"aria-label":"Blogs",className:o("flex gap-4 p-0 justify-center","flex-wrap"),children:u==="loading"?[...Array(6).keys()].map(t=>e.jsx(J,{},t)):u==="error"?e.jsxs("div",{className:o("text-center mb-8 text-xl "),children:[e.jsx("span",{className:o("text-danger"),children:"Something went wrong"})," - Try again later"]}):y.length===0?e.jsxs("div",{className:o("text-center mb-8 text-xl "),children:[e.jsx("span",{className:o("text-danger"),children:"No articles found"})," - Try a different filter"]}):y})]})})},T=ie,ke={component:T,parameters:{backgrounds:{disable:!0},controls:{hideNoControlsWarning:!0}}},ne=new K({defaultOptions:{queries:{staleTime:10*(60*1e3),cacheTime:60*(60*1e3)}}}),f=()=>e.jsx(X,{client:ne,children:e.jsxs(q,{children:[e.jsx(D,{}),e.jsx(_,{}),e.jsx(Q,{content:e.jsx(T,{}),description:C.description,title:C.title}),e.jsx(M,{allowFixed:!0})]})});var B,L,O;f.parameters={...f.parameters,docs:{...(B=f.parameters)==null?void 0:B.docs,source:{originalSource:`() => <QueryClientProvider client={queryClient}>
    <Router>
      <ScrollToTop />
      <Navbar />
      <Page content={<BlogPage />} description={BLOG.description} title={BLOG.title} />
      <Footer allowFixed />
    </Router>
  </QueryClientProvider>`,...(O=(L=f.parameters)==null?void 0:L.docs)==null?void 0:O.source}}};const qe=["Blog"];export{f as Blog,qe as __namedExportsOrder,ke as default};
//# sourceMappingURL=Blog.stories-1ebfa06a.js.map
