import{j as e,c as o}from"./cssUtils-Dj2pf34W.js";import{F as k}from"./Footer-BGCcfuxc.js";import{N as M,B as L}from"./Navbar-DPPk-EAB.js";import{R as B,P as q}from"./Page-dxZoy5ie.js";import{S as D}from"./ScrollToTop-JWgYK9c0.js";import{s as j,u as $,a as G,b as H,d as z,Q as I,c as J}from"./sortFuncs-_lwkpWeY.js";import{a as K,B as U}from"./index-CvhC5u5c.js";import{B as v}from"./Button-IaC728nH.js";import{S as V,M as W}from"./MultiSelection-DRU1oZ5k.js";import{S as X}from"./SearchField-NV3GvcE2.js";import{B as Y,L as Z}from"./BlogCardLoading-CmEY6dXp.js";import{u as ee,a as te,d as se,e as oe}from"./encodeQueryParams-CFkH-FTU.js";import{u as re}from"./useMediaQuery-BBploh3g.js";import{F as ae}from"./index-OpE8ryFg.js";import{S as ie,a as ne}from"./index-l6cHiWOH.js";import{r as a}from"./index-B3pBfn-S.js";import"./iframe-C_vqmsrx.js";import"../sb-preview/runtime.js";import"./logo-BsuX5xcP.js";import"./mouseHover-UyCq-Csl.js";import"./lib-eRFPSEAn.js";import"./_commonjsHelpers-BosuxZz1.js";import"./iconBase-D4H7oXXN.js";import"./index-8ORhBcDl.js";import"./index-dIKOytT1.js";import"./index-MXY2PIJp.js";import"./emotion-use-insertion-effect-with-fallbacks.browser.esm-DeRUGyhV.js";import"./index-CaI2xBWF.js";const le=(i,n)=>{const r=i.toLowerCase();return r.length===0||n.title.toLowerCase().includes(r)||n.description.toLowerCase().includes(r)||typeof n.tag_list!="string"&&n.tag_list.some(d=>d.toLowerCase().includes(r))},f=j[0],N=30,ce=()=>{const[i,n]=a.useState([]),[r,d]=a.useState(f),[R,A]=a.useState([]),[m,g]=a.useState(""),{status:p,data:c}=$({queryKey:["devdotto","articlesMeta",N,1],queryFn:z(N)});a.useEffect(()=>{A(c?[...new Set(c.flatMap(t=>t.tag_list))].map(t=>{const s=c.filter(l=>l.tag_list.includes(t)).length;return{value:t,count:s,label:`${t} (${s})`}}).filter(t=>t.count>0).sort((t,s)=>s.count-t.count):[])},[c]);const _=a.useCallback(t=>{t.preventDefault(),g(t.target.value)},[]),[E,w]=a.useState(!1),y=a.useCallback(()=>{n([]),d(f),g(""),w(!0),setTimeout(()=>{w(!1)},500)},[]),x=re("(max-width: 500px)"),b=K(),[S,Q]=ee("blogOptions",{tags:[],sort:f,searchText:""}),u=te();a.useEffect(()=>{if(u.toString()){if(u.get("reset"))return y(),b({hash:window.location.hash,search:""},{replace:!0}),()=>{};n([]),se(u.get("technologies")??"").forEach(t=>{const s=i.find(l=>l.value.toLowerCase()===t.toLowerCase());s&&n(l=>[...l,s])}),d(j.find(t=>{var s;return t.value.toLowerCase()===((s=u.get("sort"))==null?void 0:s.toLowerCase())})??f),g(u.get("searchText")??"")}else n(S.tags),d(S.sort),g(S.searchText);return()=>{}},[]),a.useEffect(()=>{var t;Q({tags:i,sort:r,searchText:m}),b({hash:window.location.hash,search:`?${new URLSearchParams(JSON.parse(JSON.stringify({tags:oe(i.map(s=>s.value))||void 0,sort:r.value===((t=j[0])==null?void 0:t.value)?void 0:r.value,searchText:m||void 0}))).toString()}`},{replace:!0})},[m,r,i]);const C=a.useMemo(()=>p==="pending"||p==="error"||!c?[]:c.sort(G).sort(H(r.value)).filter(t=>{const s=i.map(l=>l.value);return le(m,t)&&(i.length===0||typeof t.tag_list!="string"&&t.tag_list.filter(l=>s.includes(l)).length!==0)}).map((t,s)=>e.jsx(Y,{article:t},s)),[c,m,r.value,i,p]);return e.jsx("div",{children:e.jsxs(ae,{transitionDuration:200,children:[e.jsxs("div",{className:o("mx-auto mb-8 flex max-w-2xl items-center justify-center gap-4","flex-row","flex-wrap"),children:[e.jsx(v,{icon:e.jsx(ie,{}),isLabelHidden:x,isLight:!0,label:"DEV.to",to:"https://dev.to/timwjames",tooltip:"Find my personal blog @timwjames"}),e.jsx(v,{icon:e.jsx(ne,{}),isLabelHidden:x,isLight:!0,label:"Medium",to:"https://medium.com/@twjames",tooltip:"Find my professional @twjames"})]}),e.jsxs("section",{"aria-label":"Search Controls",className:o("mx-auto mb-4 flex place-content-center items-center","flex-col"),children:[e.jsxs("div",{className:o("flex w-full gap-4"),children:[e.jsx(X,{handleChange:_,searchText:m}),e.jsx(v,{childProps:{onClick:y,type:"reset"},className:x?o("!-mt-1 !px-2 !py-2 !text-3xl"):o("!-mt-1","!h-[50px]","!py-0"),icon:E?e.jsx("span",{className:o("inline-block","leading-0","motion-safe:animate-spin"),children:e.jsx(B,{})}):e.jsx(B,{}),iconRight:!0,isLabelHidden:x,isLight:!0,label:"Reset",mode:"button",tooltip:"Reset search and filter options"})]}),e.jsxs("div",{className:o("flex w-full gap-4","flex-wrap"),children:[e.jsx("div",{className:o("z-30 min-w-fit grow"),children:e.jsx(V,{options:j,selectedOption:r,setSelectedOption:d})}),e.jsx("div",{className:o("z-20 grow"),children:e.jsx(W,{options:R,placeholder:"Filter by tags...",selectedOptions:i,setSelectedOptions:n})})]})]}),e.jsx("section",{"aria-label":"Blogs",className:o("flex justify-center gap-4 p-0","flex-wrap"),"data-chromatic":"ignore",children:p==="pending"?[...Array(6).keys()].map(t=>e.jsx(Z,{},t)):p==="error"||!c?e.jsxs("div",{className:o("mb-8 text-center text-xl "),children:[e.jsx("span",{className:o("text-danger"),children:"Something went wrong"})," - Try again later"]}):C.length===0?e.jsxs("div",{className:o("mb-8 text-center text-xl "),children:[e.jsx("span",{className:o("text-danger"),children:"No articles found"})," - Try a different filter"]}):C})]})})},P=ce,qe={component:P,parameters:{backgrounds:{disable:!0},controls:{hideNoControlsWarning:!0}}},de=new I({defaultOptions:{queries:{staleTime:10*(60*1e3),gcTime:60*(60*1e3)}}}),h=()=>e.jsx(J,{client:de,children:e.jsxs(U,{children:[e.jsx(D,{}),e.jsx(M,{}),e.jsx(q,{description:L.description,title:L.title,children:e.jsx(P,{})}),e.jsx(k,{allowFixed:!0})]})});var O,T,F;h.parameters={...h.parameters,docs:{...(O=h.parameters)==null?void 0:O.docs,source:{originalSource:`() => <QueryClientProvider client={queryClient}>
    <Router>
      <ScrollToTop />
      <Navbar />
      <Page description={BLOG.description} title={BLOG.title}>
        <BlogPage />
      </Page>
      <Footer allowFixed />
    </Router>
  </QueryClientProvider>`,...(F=(T=h.parameters)==null?void 0:T.docs)==null?void 0:F.source}}};const De=["Blog"];export{h as Blog,De as __namedExportsOrder,qe as default};
