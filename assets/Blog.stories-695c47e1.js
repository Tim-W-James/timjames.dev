import{j as e,c as r}from"./cssUtils-781a8f60.js";import{F as A}from"./Footer-8882f1c4.js";import{P as E}from"./Page-02849746.js";import{N as k,B as y}from"./Navbar-c6ad27a7.js";import{S as D}from"./ScrollToTop-64b74ea4.js";import{a as M,B as Q}from"./index-733821c1.js";import{r as l}from"./index-f1f749bf.js";import{B as h}from"./Button-6851bd38.js";import{S as $,M as G}from"./MultiSelection-4f3a3e8b.js";import{S as z}from"./SearchField-927d067a.js";import{C as J,L as V}from"./BlogCardLoading-46f76557.js";import{u as W,d as q}from"./useQuery.esm-4d0dcab3.js";import{u as H,a as I,d as U,e as K,R as L}from"./index.esm-bac33e84.js";import{V as X,W as Y}from"./index.esm-568cca05.js";import"./useMediaQuery-f3cc2322.js";import"./logo-7615857d.js";import"./motion-1309bd4c.js";import"./mouseHover-f6e29944.js";import"./lib-3be3408a.js";import"./_commonjsHelpers-042e6b4d.js";import"./hoist-non-react-statics.cjs-63c3687f.js";import"./extends-34e645d9.js";import"./emotion-use-insertion-effect-with-fallbacks.browser.esm-3d5299f2.js";import"./index-96c5f47c.js";import"./index.esm-709e8447.js";import"./iconBase-4e3618d4.js";import"./index-7f2f9e92.js";const Z=["Popularity","Latest","Quick Reads"],m=Z.map(s=>({value:s,label:s})),T=(s,a)=>a.public_reactions_count-s.public_reactions_count,ee=(s,a)=>s.reading_time_minutes-a.reading_time_minutes,te=(s,a)=>new Date(a.published_timestamp).getTime()-new Date(s.published_timestamp).getTime(),se=s=>{switch(s){case"Latest":return te;case"Quick Reads":return ee;case"Popularity":return T;default:return()=>0}},oe=(s,a)=>{const i=s.toLowerCase();return i.length===0||a.title.toLowerCase().includes(i)||a.description.toLowerCase().includes(i)||a.tag_list.some(c=>c.toLowerCase().includes(i))},N=100,ae=()=>{const{status:s,data:a}=W([`devdotto-meta-${N}}`],q(N)),[i,c]=l.useState([]),[p,g]=l.useState(m[0]),[C,_]=l.useState([]),[d,x]=l.useState("");l.useEffect(()=>{_(a?[...new Set(a.flatMap(t=>t.tag_list))].map(t=>{const o=a.filter(n=>n.tag_list.includes(t)).length;return{value:t,count:o,label:`${t} (${o})`}}).filter(t=>t.count>0).sort((t,o)=>o.count-t.count):[])},[a]);const R=t=>{t.preventDefault(),x(t.target.value)},[F,w]=l.useState(!1),S=()=>{c([]),g(m[0]),x(""),w(!0),setTimeout(()=>{w(!1)},500)},v=M(),[f,P]=H("blogOptions",{tags:[],sort:m[0],searchText:""}),u=I();l.useEffect(()=>{if(u.toString()){if(u.get("reset"))return S(),v({hash:window.location.hash,search:""}),()=>{};c([]),U(u.get("technologies")||"").forEach(t=>{const o=i.find(n=>n.value.toLowerCase()===t.toLowerCase());o&&c(n=>[...n,o])}),g(m.find(t=>{var o;return t.value.toLowerCase()===((o=u.get("sort"))==null?void 0:o.toLowerCase())})||m[0]),x(u.get("searchText")||"")}else c(f.tags),g(f.sort),x(f.searchText);return()=>{}},[]),l.useEffect(()=>{var t;P({tags:i,sort:p,searchText:d}),v({hash:window.location.hash,search:"?"+new URLSearchParams(JSON.parse(JSON.stringify({tags:K(i.map(o=>o.value))||void 0,sort:p.value===((t=m[0])==null?void 0:t.value)?void 0:p.value,searchText:d||void 0}))).toString()})},[d,p,i]);const b=s==="loading"||s==="error"?[]:a.sort(T).sort(se(p.value)).filter(t=>{const o=i.map(n=>n.value);return oe(d,t)&&(i.length===0||t.tag_list.filter(n=>o.includes(n)).length!==0)}).map((t,o)=>e.jsx(J,{article:t},o));return e.jsxs("div",{children:[e.jsxs("div",{className:r("flex gap-4 justify-center items-center max-w-2xl mx-auto mb-8","flex-row","flex-wrap"),children:[e.jsx(h,{icon:e.jsx(X,{}),isLight:!0,label:"DEV.to",to:"https://dev.to/timwjames",tooltip:"Find my personal blog @timwjames"}),e.jsx(h,{icon:e.jsx(Y,{}),isLight:!0,label:"Medium",to:"https://medium.com/@twjames",tooltip:"Find my professional @twjames"})]}),e.jsxs("section",{"aria-label":"Search Controls",className:r("flex mx-auto items-center place-content-center mb-4","flex-col"),children:[e.jsxs("div",{className:r("w-full flex gap-4"),children:[e.jsx(z,{handleChange:R,searchText:d}),e.jsx(h,{className:r("text-3xl !px-2 py-2 -mt-1"),icon:F?e.jsx("span",{className:r("inline-block","leading-0","motion-safe:animate-spin"),children:e.jsx(L,{})}):e.jsx(L,{}),iconRight:!0,isLabelHidden:!0,isLight:!0,label:"Reset",mode:"button",onClick:S,tooltip:"Reset search and filter options"})]}),e.jsxs("div",{className:r("flex gap-4 w-full","flex-wrap"),children:[e.jsx("div",{className:r("z-30 grow min-w-fit"),children:e.jsx($,{options:m,selectedOption:p,setSelectedOption:g})}),e.jsx("div",{className:r("z-20 grow"),children:e.jsx(G,{options:C,placeholder:"Filter by tags...",selectedOptions:i,setSelectedOptions:c})})]})]}),e.jsx("section",{"aria-label":"Blogs",className:r("flex gap-4 p-0 justify-center","flex-wrap"),children:s==="loading"?[...Array(6).keys()].map(t=>e.jsx(V,{},t)):s==="error"?e.jsxs("div",{className:r("text-center mb-8 text-xl "),children:[e.jsx("span",{className:r("text-danger"),children:"Something went wrong"})," - Try again later"]}):b.length===0?e.jsxs("div",{className:r("text-center mb-8 text-xl "),children:[e.jsx("span",{className:r("text-danger"),children:"No articles found"})," - Try a different filter"]}):b})]})},O=ae,Fe={component:O,parameters:{backgrounds:{disable:!0},controls:{hideNoControlsWarning:!0}}},j=()=>e.jsxs(Q,{children:[e.jsx(D,{}),e.jsx(k,{}),e.jsx(E,{content:e.jsx(O,{}),description:y.description,title:y.title}),e.jsx(A,{allowFixed:!0})]});var B;j.parameters={...j.parameters,storySource:{source:`() => <Router>
    <ScrollToTop />
    <Navbar />
    <Page content={<BlogPage />} description={BLOG.description} title={BLOG.title} />
    <Footer allowFixed />
  </Router>`,...(B=j.parameters)==null?void 0:B.storySource}};const Pe=["Blog"];export{j as Blog,Pe as __namedExportsOrder,Fe as default};
//# sourceMappingURL=Blog.stories-695c47e1.js.map
