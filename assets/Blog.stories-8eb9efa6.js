import{j as e,c as o}from"./cssUtils-781a8f60.js";import{F as A}from"./Footer-8882f1c4.js";import{P as E}from"./Page-02849746.js";import{N as M,B as y}from"./Navbar-c6ad27a7.js";import{S as _}from"./ScrollToTop-64b74ea4.js";import{a as k,B as D}from"./index-733821c1.js";import{r as n}from"./index-f1f749bf.js";import{B as h}from"./Button-6851bd38.js";import{S as G,M as $}from"./MultiSelection-4f3a3e8b.js";import{S as z}from"./SearchField-927d067a.js";import{B as J,L as Q}from"./BlogCardLoading-edebd572.js";import{s as c,u as V,a as W,b as q,d as H}from"./useQuery.esm-d1077d51.js";import{u as I,a as U,d as K,e as X,R as N}from"./index.esm-bac33e84.js";import{V as Y,W as Z}from"./index.esm-568cca05.js";import"./useMediaQuery-f3cc2322.js";import"./logo-7615857d.js";import"./motion-1309bd4c.js";import"./mouseHover-f6e29944.js";import"./lib-3be3408a.js";import"./_commonjsHelpers-042e6b4d.js";import"./hoist-non-react-statics.cjs-63c3687f.js";import"./extends-34e645d9.js";import"./emotion-use-insertion-effect-with-fallbacks.browser.esm-3d5299f2.js";import"./index-96c5f47c.js";import"./index.esm-fa6ef5c1.js";import"./iconBase-4e3618d4.js";import"./index-7f2f9e92.js";const ee=(r,i)=>{const a=r.toLowerCase();return a.length===0||i.title.toLowerCase().includes(a)||i.description.toLowerCase().includes(a)||i.tag_list.some(m=>m.toLowerCase().includes(a))},B=30,te=()=>{const[r,i]=n.useState([]),[a,m]=n.useState(c[0]),[T,C]=n.useState([]),[d,g]=n.useState(""),{status:u,data:p}=V(["devdotto","articlesMeta",B,1],H(B));n.useEffect(()=>{C(p?[...new Set(p.flatMap(t=>t.tag_list))].map(t=>{const s=p.filter(l=>l.tag_list.includes(t)).length;return{value:t,count:s,label:`${t} (${s})`}}).filter(t=>t.count>0).sort((t,s)=>s.count-t.count):[])},[p]);const F=t=>{t.preventDefault(),g(t.target.value)},[R,S]=n.useState(!1),v=()=>{i([]),m(c[0]),g(""),S(!0),setTimeout(()=>{S(!1)},500)},w=k(),[f,P]=I("blogOptions",{tags:[],sort:c[0],searchText:""}),x=U();n.useEffect(()=>{if(x.toString()){if(x.get("reset"))return v(),w({hash:window.location.hash,search:""}),()=>{};i([]),K(x.get("technologies")||"").forEach(t=>{const s=r.find(l=>l.value.toLowerCase()===t.toLowerCase());s&&i(l=>[...l,s])}),m(c.find(t=>{var s;return t.value.toLowerCase()===((s=x.get("sort"))==null?void 0:s.toLowerCase())})||c[0]),g(x.get("searchText")||"")}else i(f.tags),m(f.sort),g(f.searchText);return()=>{}},[]),n.useEffect(()=>{var t;P({tags:r,sort:a,searchText:d}),w({hash:window.location.hash,search:"?"+new URLSearchParams(JSON.parse(JSON.stringify({tags:X(r.map(s=>s.value))||void 0,sort:a.value===((t=c[0])==null?void 0:t.value)?void 0:a.value,searchText:d||void 0}))).toString()})},[d,a,r]);const b=n.useMemo(()=>u==="loading"||u==="error"?[]:p.sort(W).sort(q(a.value)).filter(t=>{const s=r.map(l=>l.value);return ee(d,t)&&(r.length===0||t.tag_list.filter(l=>s.includes(l)).length!==0)}).map((t,s)=>e.jsx(J,{article:t},s)),[p,d,a.value,r,u]);return e.jsxs("div",{children:[e.jsxs("div",{className:o("flex gap-4 justify-center items-center max-w-2xl mx-auto mb-8","flex-row","flex-wrap"),children:[e.jsx(h,{icon:e.jsx(Y,{}),isLight:!0,label:"DEV.to",to:"https://dev.to/timwjames",tooltip:"Find my personal blog @timwjames"}),e.jsx(h,{icon:e.jsx(Z,{}),isLight:!0,label:"Medium",to:"https://medium.com/@twjames",tooltip:"Find my professional @twjames"})]}),e.jsxs("section",{"aria-label":"Search Controls",className:o("flex mx-auto items-center place-content-center mb-4","flex-col"),children:[e.jsxs("div",{className:o("w-full flex gap-4"),children:[e.jsx(z,{handleChange:F,searchText:d}),e.jsx(h,{className:o("text-3xl !px-2 py-2 -mt-1"),icon:R?e.jsx("span",{className:o("inline-block","leading-0","motion-safe:animate-spin"),children:e.jsx(N,{})}):e.jsx(N,{}),iconRight:!0,isLabelHidden:!0,isLight:!0,label:"Reset",mode:"button",onClick:v,tooltip:"Reset search and filter options"})]}),e.jsxs("div",{className:o("flex gap-4 w-full","flex-wrap"),children:[e.jsx("div",{className:o("z-30 grow min-w-fit"),children:e.jsx(G,{options:c,selectedOption:a,setSelectedOption:m})}),e.jsx("div",{className:o("z-20 grow"),children:e.jsx($,{options:T,placeholder:"Filter by tags...",selectedOptions:r,setSelectedOptions:i})})]})]}),e.jsx("section",{"aria-label":"Blogs",className:o("flex gap-4 p-0 justify-center","flex-wrap"),children:u==="loading"?[...Array(6).keys()].map(t=>e.jsx(Q,{},t)):u==="error"?e.jsxs("div",{className:o("text-center mb-8 text-xl "),children:[e.jsx("span",{className:o("text-danger"),children:"Something went wrong"})," - Try again later"]}):b.length===0?e.jsxs("div",{className:o("text-center mb-8 text-xl "),children:[e.jsx("span",{className:o("text-danger"),children:"No articles found"})," - Try a different filter"]}):b})]})},O=te,Ce={component:O,parameters:{backgrounds:{disable:!0},controls:{hideNoControlsWarning:!0}}},j=()=>e.jsxs(D,{children:[e.jsx(_,{}),e.jsx(M,{}),e.jsx(E,{content:e.jsx(O,{}),description:y.description,title:y.title}),e.jsx(A,{allowFixed:!0})]});var L;j.parameters={...j.parameters,storySource:{source:`() => <Router>
    <ScrollToTop />
    <Navbar />
    <Page content={<BlogPage />} description={BLOG.description} title={BLOG.title} />
    <Footer allowFixed />
  </Router>`,...(L=j.parameters)==null?void 0:L.storySource}};const Fe=["Blog"];export{j as Blog,Fe as __namedExportsOrder,Ce as default};
//# sourceMappingURL=Blog.stories-8eb9efa6.js.map
