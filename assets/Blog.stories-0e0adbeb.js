import{j as e,c as o}from"./cssUtils-e467a5c7.js";import{F as k}from"./Footer-3289df39.js";import{N as M,B as L}from"./Navbar-6d7b7382.js";import{R as B,P as D}from"./Page-20feb12e.js";import{S as q}from"./ScrollToTop-eefa3978.js";import{a as $,B as G}from"./index-16bc9783.js";import{B as v}from"./Button-5caa89dd.js";import{S as H,M as z}from"./MultiSelection-e3a39ec0.js";import{S as I}from"./SearchField-99a67ac6.js";import{B as J,L as U}from"./BlogCardLoading-23e19069.js";import{s as j,u as V,a as W,b as K,d as X,Q as Y,c as Z}from"./sortFuncs-768fd610.js";import{u as ee,a as te,d as se,e as oe}from"./encodeQueryParams-c6953622.js";import{u as re}from"./useMediaQuery-8e989222.js";import{F as ae}from"./index-3ad2dd3c.js";import{b as ie,c as ne}from"./index.esm-0b3aa410.js";import{r as a}from"./index-76fb7be0.js";import"./iframe-12fc3bb8.js";import"../sb-preview/runtime.js";import"./logo-7f2f81ce.js";import"./mouseHover-f6e29944.js";import"./lib-2dd17942.js";import"./_commonjsHelpers-de833af9.js";import"./iconBase-1d38e9b4.js";import"./index.esm-1b5d195d.js";import"./assertThisInitialized-db2ea5a4.js";import"./hoist-non-react-statics.cjs-3f8ebaa8.js";import"./index-d3ea75b5.js";import"./index.esm-aecd2dbc.js";import"./index-6f617fd3.js";const le=(i,n)=>{const r=i.toLowerCase();return r.length===0||n.title.toLowerCase().includes(r)||n.description.toLowerCase().includes(r)||typeof n.tag_list!="string"&&n.tag_list.some(m=>m.toLowerCase().includes(r))},f=j[0],N=30,ce=()=>{const[i,n]=a.useState([]),[r,m]=a.useState(f),[R,A]=a.useState([]),[d,g]=a.useState(""),{status:p,data:c}=V(["devdotto","articlesMeta",N,1],X(N));a.useEffect(()=>{A(c?[...new Set(c.flatMap(t=>t.tag_list))].map(t=>{const s=c.filter(l=>l.tag_list.includes(t)).length;return{value:t,count:s,label:`${t} (${s})`}}).filter(t=>t.count>0).sort((t,s)=>s.count-t.count):[])},[c]);const _=a.useCallback(t=>{t.preventDefault(),g(t.target.value)},[]),[E,w]=a.useState(!1),y=a.useCallback(()=>{n([]),m(f),g(""),w(!0),setTimeout(()=>{w(!1)},500)},[]),x=re("(max-width: 500px)"),C=$(),[S,Q]=ee("blogOptions",{tags:[],sort:f,searchText:""}),u=te();a.useEffect(()=>{if(u.toString()){if(u.get("reset"))return y(),C({hash:window.location.hash,search:""},{replace:!0}),()=>{};n([]),se(u.get("technologies")??"").forEach(t=>{const s=i.find(l=>l.value.toLowerCase()===t.toLowerCase());s&&n(l=>[...l,s])}),m(j.find(t=>{var s;return t.value.toLowerCase()===((s=u.get("sort"))==null?void 0:s.toLowerCase())})??f),g(u.get("searchText")??"")}else n(S.tags),m(S.sort),g(S.searchText);return()=>{}},[]),a.useEffect(()=>{var t;Q({tags:i,sort:r,searchText:d}),C({hash:window.location.hash,search:`?${new URLSearchParams(JSON.parse(JSON.stringify({tags:oe(i.map(s=>s.value))||void 0,sort:r.value===((t=j[0])==null?void 0:t.value)?void 0:r.value,searchText:d||void 0}))).toString()}`},{replace:!0})},[d,r,i]);const b=a.useMemo(()=>p==="loading"||p==="error"||!c?[]:c.sort(W).sort(K(r.value)).filter(t=>{const s=i.map(l=>l.value);return le(d,t)&&(i.length===0||typeof t.tag_list!="string"&&t.tag_list.filter(l=>s.includes(l)).length!==0)}).map((t,s)=>e.jsx(J,{article:t},s)),[c,d,r.value,i,p]);return e.jsx("div",{children:e.jsxs(ae,{transitionDuration:200,children:[e.jsxs("div",{className:o("mx-auto mb-8 flex max-w-2xl items-center justify-center gap-4","flex-row","flex-wrap"),children:[e.jsx(v,{icon:e.jsx(ie,{}),isLabelHidden:x,isLight:!0,label:"DEV.to",to:"https://dev.to/timwjames",tooltip:"Find my personal blog @timwjames"}),e.jsx(v,{icon:e.jsx(ne,{}),isLabelHidden:x,isLight:!0,label:"Medium",to:"https://medium.com/@twjames",tooltip:"Find my professional @twjames"})]}),e.jsxs("section",{"aria-label":"Search Controls",className:o("mx-auto mb-4 flex place-content-center items-center","flex-col"),children:[e.jsxs("div",{className:o("flex w-full gap-4"),children:[e.jsx(I,{handleChange:_,searchText:d}),e.jsx(v,{childProps:{onClick:y,type:"reset"},className:x?o("!-mt-1 !px-2 !py-2 !text-3xl"):o("!-mt-1","!h-[50px]","!py-0"),icon:E?e.jsx("span",{className:o("inline-block","leading-0","motion-safe:animate-spin"),children:e.jsx(B,{})}):e.jsx(B,{}),iconRight:!0,isLabelHidden:x,isLight:!0,label:"Reset",mode:"button",tooltip:"Reset search and filter options"})]}),e.jsxs("div",{className:o("flex w-full gap-4","flex-wrap"),children:[e.jsx("div",{className:o("z-30 min-w-fit grow"),children:e.jsx(H,{options:j,selectedOption:r,setSelectedOption:m})}),e.jsx("div",{className:o("z-20 grow"),children:e.jsx(z,{options:R,placeholder:"Filter by tags...",selectedOptions:i,setSelectedOptions:n})})]})]}),e.jsx("section",{"aria-label":"Blogs",className:o("flex justify-center gap-4 p-0","flex-wrap"),"data-chromatic":"ignore",children:p==="loading"?[...Array(6).keys()].map(t=>e.jsx(U,{},t)):p==="error"||!c?e.jsxs("div",{className:o("mb-8 text-center text-xl "),children:[e.jsx("span",{className:o("text-danger"),children:"Something went wrong"})," - Try again later"]}):b.length===0?e.jsxs("div",{className:o("mb-8 text-center text-xl "),children:[e.jsx("span",{className:o("text-danger"),children:"No articles found"})," - Try a different filter"]}):b})]})})},F=ce,qe={component:F,parameters:{backgrounds:{disable:!0},controls:{hideNoControlsWarning:!0}}},me=new Y({defaultOptions:{queries:{staleTime:10*(60*1e3),cacheTime:60*(60*1e3)}}}),h=()=>e.jsx(Z,{client:me,children:e.jsxs(G,{children:[e.jsx(q,{}),e.jsx(M,{}),e.jsx(D,{description:L.description,title:L.title,children:e.jsx(F,{})}),e.jsx(k,{allowFixed:!0})]})});var O,T,P;h.parameters={...h.parameters,docs:{...(O=h.parameters)==null?void 0:O.docs,source:{originalSource:`() => <QueryClientProvider client={queryClient}>
    <Router>
      <ScrollToTop />
      <Navbar />
      <Page description={BLOG.description} title={BLOG.title}>
        <BlogPage />
      </Page>
      <Footer allowFixed />
    </Router>
  </QueryClientProvider>`,...(P=(T=h.parameters)==null?void 0:T.docs)==null?void 0:P.source}}};const $e=["Blog"];export{h as Blog,$e as __namedExportsOrder,qe as default};
//# sourceMappingURL=Blog.stories-0e0adbeb.js.map
