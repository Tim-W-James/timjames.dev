import{j as e,c as o}from"./cssUtils-de5e8e0f.js";import{F as Q}from"./Footer-87c71faf.js";import{R as b,P as _}from"./Page-d0af2cc8.js";import{N as k,B as N}from"./Navbar-14da0945.js";import{S as D}from"./ScrollToTop-d0c281a5.js";import{u as q,B as $}from"./index-376d37db.js";import{B as S}from"./Button-cff6790d.js";import{S as G,M as z}from"./MultiSelection-f3f92252.js";import{S as I}from"./SearchField-ee632f29.js";import{B as J,L as H}from"./BlogCardLoading-a0a45e0f.js";import{s as h,u as U,a as V,b as W,d as K,Q as X,c as Y}from"./sortFuncs-bc3f4df9.js";import{u as Z,a as ee,d as te,e as se}from"./encodeQueryParams-54b1f1a4.js";import{F as oe}from"./index-963fef9e.js";import{S as re,a as ae}from"./index.esm-2814d648.js";import{r as a}from"./index-f1f749bf.js";import"./useMediaQuery-750cbce2.js";import"./iconBase-4e3618d4.js";import"./inheritsLoose-c82a83d4.js";import"./index.esm-966ec57a.js";import"./iframe-8038df8c.js";import"../sb-preview/runtime.mjs";import"./logo-7f2f81ce.js";import"./mouseHover-f6e29944.js";import"./lib-32fe9ed5.js";import"./_commonjsHelpers-042e6b4d.js";import"./assertThisInitialized-374e0835.js";import"./hoist-non-react-statics.cjs-691fe6cb.js";import"./index-96c5f47c.js";import"./index.esm-36e9b6d8.js";import"./index-7f2f9e92.js";const ie=(i,l)=>{const r=i.toLowerCase();return r.length===0||l.title.toLowerCase().includes(r)||l.description.toLowerCase().includes(r)||l.tag_list.some(c=>c.toLowerCase().includes(r))},g=h[0],B=30,le=()=>{const[i,l]=a.useState([]),[r,c]=a.useState(g),[P,R]=a.useState([]),[m,x]=a.useState(""),{status:p,data:d}=U(["devdotto","articlesMeta",B,1],K(B));a.useEffect(()=>{R(d?[...new Set(d.flatMap(t=>t.tag_list))].map(t=>{const s=d.filter(n=>n.tag_list.includes(t)).length;return{value:t,count:s,label:`${t} (${s})`}}).filter(t=>t.count>0).sort((t,s)=>s.count-t.count):[])},[d]);const A=a.useCallback(t=>{t.preventDefault(),x(t.target.value)},[]),[E,v]=a.useState(!1),w=a.useCallback(()=>{l([]),c(g),x(""),v(!0),setTimeout(()=>{v(!1)},500)},[]),y=q(),[j,M]=Z("blogOptions",{tags:[],sort:g,searchText:""}),u=ee();a.useEffect(()=>{if(u.toString()){if(u.get("reset"))return w(),y({hash:window.location.hash,search:""},{replace:!0}),()=>{};l([]),te(u.get("technologies")||"").forEach(t=>{const s=i.find(n=>n.value.toLowerCase()===t.toLowerCase());s&&l(n=>[...n,s])}),c(h.find(t=>{var s;return t.value.toLowerCase()===((s=u.get("sort"))==null?void 0:s.toLowerCase())})||g),x(u.get("searchText")||"")}else l(j.tags),c(j.sort),x(j.searchText);return()=>{}},[]),a.useEffect(()=>{var t;M({tags:i,sort:r,searchText:m}),y({hash:window.location.hash,search:`?${new URLSearchParams(JSON.parse(JSON.stringify({tags:se(i.map(s=>s.value))||void 0,sort:r.value===((t=h[0])==null?void 0:t.value)?void 0:r.value,searchText:m||void 0}))).toString()}`},{replace:!0})},[m,r,i]);const C=a.useMemo(()=>p==="loading"||p==="error"?[]:d.sort(V).sort(W(r.value)).filter(t=>{const s=i.map(n=>n.value);return ie(m,t)&&(i.length===0||t.tag_list.filter(n=>s.includes(n)).length!==0)}).map((t,s)=>e.jsx(J,{article:t},s)),[d,m,r.value,i,p]);return e.jsx("div",{children:e.jsxs(oe,{transitionDuration:200,children:[e.jsxs("div",{className:o("mx-auto mb-8 flex max-w-2xl items-center justify-center gap-4","flex-row","flex-wrap"),children:[e.jsx(S,{icon:e.jsx(re,{}),isLight:!0,label:"DEV.to",to:"https://dev.to/timwjames",tooltip:"Find my personal blog @timwjames"}),e.jsx(S,{icon:e.jsx(ae,{}),isLight:!0,label:"Medium",to:"https://medium.com/@twjames",tooltip:"Find my professional @twjames"})]}),e.jsxs("section",{"aria-label":"Search Controls",className:o("mx-auto mb-4 flex place-content-center items-center","flex-col"),children:[e.jsxs("div",{className:o("flex w-full gap-4"),children:[e.jsx(I,{handleChange:A,searchText:m}),e.jsx(S,{className:o("!-mt-1 !px-2 !py-2 !text-3xl"),icon:E?e.jsx("span",{className:o("inline-block","leading-0","motion-safe:animate-spin"),children:e.jsx(b,{})}):e.jsx(b,{}),iconRight:!0,isLabelHidden:!0,isLight:!0,label:"Reset",mode:"button",onClick:w,tooltip:"Reset search and filter options",type:"reset"})]}),e.jsxs("div",{className:o("flex w-full gap-4","flex-wrap"),children:[e.jsx("div",{className:o("z-30 min-w-fit grow"),children:e.jsx(G,{options:h,selectedOption:r,setSelectedOption:c})}),e.jsx("div",{className:o("z-20 grow"),children:e.jsx(z,{options:P,placeholder:"Filter by tags...",selectedOptions:i,setSelectedOptions:l})})]})]}),e.jsx("section",{"aria-label":"Blogs",className:o("flex justify-center gap-4 p-0","flex-wrap"),"data-chromatic":"ignore",children:p==="loading"?[...Array(6).keys()].map(t=>e.jsx(H,{},t)):p==="error"?e.jsxs("div",{className:o("mb-8 text-center text-xl "),children:[e.jsx("span",{className:o("text-danger"),children:"Something went wrong"})," - Try again later"]}):C.length===0?e.jsxs("div",{className:o("mb-8 text-center text-xl "),children:[e.jsx("span",{className:o("text-danger"),children:"No articles found"})," - Try a different filter"]}):C})]})})},F=le,De={component:F,parameters:{backgrounds:{disable:!0},controls:{hideNoControlsWarning:!0}}},ne=new X({defaultOptions:{queries:{staleTime:10*(60*1e3),cacheTime:60*(60*1e3)}}}),f=()=>e.jsx(Y,{client:ne,children:e.jsxs($,{children:[e.jsx(D,{}),e.jsx(k,{}),e.jsx(_,{content:e.jsx(F,{}),description:N.description,title:N.title}),e.jsx(Q,{allowFixed:!0})]})});var L,O,T;f.parameters={...f.parameters,docs:{...(L=f.parameters)==null?void 0:L.docs,source:{originalSource:`() => <QueryClientProvider client={queryClient}>
    <Router>
      <ScrollToTop />
      <Navbar />
      <Page content={<BlogPage />} description={BLOG.description} title={BLOG.title} />
      <Footer allowFixed />
    </Router>
  </QueryClientProvider>`,...(T=(O=f.parameters)==null?void 0:O.docs)==null?void 0:T.source}}};const qe=["Blog"];export{f as Blog,qe as __namedExportsOrder,De as default};
//# sourceMappingURL=Blog.stories-f400cea3.js.map
